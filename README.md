# envcraft

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                            â•‘
â•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—     â•‘
â•‘   â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â•šâ•â•â–ˆâ–ˆâ•”â•â•â•     â•‘
â•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—     â–ˆâ–ˆâ•‘        â•‘
â•‘   â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•     â–ˆâ–ˆâ•‘        â•‘
â•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘        â–ˆâ–ˆâ•‘        â•‘
â•‘   â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•â•  â•šâ•â•â•â•   â•šâ•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•        â•šâ•â•        â•‘
â•‘                                                                            â•‘
â•‘                      Precise tools for .env files                          â•‘
â•‘                                                                            â•‘
â•‘                      ğŸ¸ LazyFrog | kindware.dev                            â•‘
â•‘                                                                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

[![Rust](https://img.shields.io/badge/Rust-000000?style=for-the-badge&logo=rust&logoColor=white)](https://www.rust-lang.org/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg?style=for-the-badge)](https://opensource.org/licenses/MIT)
[![Windows](https://img.shields.io/badge/Windows-0078D6?style=for-the-badge&logo=windows&logoColor=white)](https://www.microsoft.com/windows)
[![Linux](https://img.shields.io/badge/Linux-FCC624?style=for-the-badge&logo=linux&logoColor=black)](https://www.linux.org/)
[![macOS](https://img.shields.io/badge/macOS-000000?style=for-the-badge&logo=apple&logoColor=white)](https://www.apple.com/macos)
[![crates.io](https://img.shields.io/badge/crates.io-e6522c?style=for-the-badge&logo=rust&logoColor=white)](https://crates.io/crates/envcraft)

---

## ğŸ¯ What is envcraft?

**envcraft** is a safe, deterministic CLI tool for working with `.env` files. It performs three operations with absolute precision:

| Command | Purpose |
|---------|---------|
| `check` | Validate a `.env` file against a YAML schema |
| `diff` | Show semantic differences between two `.env` files |
| `format` | Normalize and format a `.env` file |

## âœ¨ Features

- ğŸ”’ **Safe** â€” Never modifies secret values (only trims whitespace)
- ğŸ¯ **Deterministic** â€” Same input always produces same output
- ğŸš« **No AI** â€” No heuristics, no guessing, no surprises
- ğŸŒ **Offline** â€” No network access, no telemetry
- ğŸ–¥ï¸ **Cross-platform** â€” Works on Windows, Linux, and macOS
- ğŸ“¦ **Zero unsafe code** â€” Pure safe Rust

---

## ğŸ“¦ Installation

### From crates.io

```bash
cargo install envcraft
```

### From source

```bash
git clone https://github.com/Brutus1066/envcraft.git
cd envcraft
cargo build --release
```

The binary will be at `target/release/envcraft`.

---

## ğŸš€ Usage

### Check: Validate against a schema

```bash
envcraft check schema.yml .env
```

**Schema format (YAML):**

```yaml
PORT: int
DEBUG: bool
DATABASE_URL: string
API_KEY: string
```

**Supported types:**

| Type | Description | Valid examples |
|------|-------------|----------------|
| `string` | Any value | `hello`, `user@example.com` |
| `int` | Integer (i64) | `42`, `-10`, `8080` |
| `bool` | Boolean | `true`, `false`, `TRUE`, `FALSE` |

**Output:**

```
error: missing required key: API_KEY
error: key 'PORT' has invalid value 'abc' (expected an integer)
warning: extra key not in schema: LEGACY_MODE
âœ— validation failed with 2 error(s)
```

### Diff: Compare two files

```bash
envcraft diff .env.production .env.staging
```

**Output:**

```
+ NEW_FEATURE=enabled
- DEPRECATED_KEY=old_value
~ DATABASE_URL: prod-db â†’ staging-db
~ PORT: 80 â†’ 8080

4 difference(s) found
```

**Redact sensitive values:**

```bash
envcraft diff .env.production .env.staging --redact
```

**Output:**

```
+ NEW_FEATURE
- DEPRECATED_KEY
~ DATABASE_URL
~ PORT

4 difference(s) found
```

### Format: Normalize a file

```bash
envcraft format .env
```

**What it does:**

- âœ… Trims whitespace from keys and values
- âœ… Converts keys to UPPERCASE
- âœ… Normalizes format to `KEY=VALUE`
- âœ… Sorts keys alphabetically
- âœ… Preserves comments
- âŒ Never modifies actual values (except whitespace trimming)

**Modify in place:**

```bash
envcraft format .env --in-place
```

---

## ğŸ“‹ Examples

### Example `.env` file

```env
# Database configuration
DATABASE_URL=postgres://localhost:5432/myapp

# Server settings
PORT=8080
DEBUG=false

# API keys
API_KEY=sk_live_abc123xyz
```

### Example schema

```yaml
# schema.yml
DATABASE_URL: string
PORT: int
DEBUG: bool
API_KEY: string
```

---

## ğŸ”’ Trust & Safety

**envcraft** is designed with security in mind:

| Guarantee | Description |
|-----------|-------------|
| ğŸš« No network access | The tool never makes HTTP requests |
| ğŸš« No telemetry | No data is collected or transmitted |
| ğŸš« No AI/heuristics | Behavior is 100% deterministic |
| ğŸš« No secret analysis | Values are treated as opaque strings |
| âœ… Whitespace only | The only modification to values is trimming |
| âœ… Offline operation | Works without internet connection |
| âœ… Open source | Full source code available for audit |

---

## ğŸ› ï¸ Building

```bash
# Debug build
cargo build

# Release build (optimized)
cargo build --release

# Run tests
cargo test

# Run with verbose test output
cargo test -- --nocapture
```

---

## ğŸ“„ License

This project is licensed under the **MIT License** â€” see the [LICENSE](LICENSE) file for details.

---

## ğŸ¸ About

**envcraft** is developed by **LazyFrog** at [kindware.dev](https://kindware.dev).

- ğŸ“§ **Support:** [support@kindware.dev](mailto:support@kindware.dev)
- ğŸ™ **GitHub:** [github.com/Brutus1066/envcraft](https://github.com/Brutus1066/envcraft)
- ğŸŒ **Website:** [kindware.dev](https://kindware.dev)

---

<p align="center">
  <strong>ğŸ¸ LazyFrog | kindware.dev</strong><br>
  <em>Precise tools for .env files</em>
</p>
